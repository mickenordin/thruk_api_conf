## API Conf Thruk Plugin

This plugin allows you to configure Icinga2 via the in built HTTP API.

This plugin is free software, you can redistribute it and/or modify
it under the same terms as Perl itself.

Dependencies for ubuntu 14.04 is: liblwp-protocol-https-perl libconfig-json-perl libnet-sslglue-perl libdata-validate-ip-perl

Add this to thruk_local to get access to plugin actions from the action menu:

<action_menu_items>
    hostmenu = {\
       "icon": "/thruk/themes/{{theme}}/images/dropdown.png",\
       "title": "Host Menu",\
       "menu": [\
            {\
               "icon": "/thruk/themes/{{theme}}/images/delete.png",\
               "label": "Delete Host",\
               "action": "/thruk/cgi-bin/api_conf.cgi?page_type=hosts&mode=delete&host=$HOSTNAME$"\
            },\
            {\
               "icon": "/thruk/themes/{{theme}}/images/add.png",\
               "label": "Add Service to Host",\
               "action": "/thruk/cgi-bin/api_conf.cgi?page_type=services&mode=create&host=$HOSTNAME$"\
            },\
       ]\
    }
    servicemenu = {\
       "icon": "/thruk/themes/{{theme}}/images/dropdown.png",\
       "title": "Service Menu",\
       "menu": [\
           {\
               "icon": "/thruk/themes/{{theme}}/images/delete.png",\
               "label": "Delete Service",\
               "action": "/thruk/cgi-bin/api_conf.cgi?page_type=services&mode=delete&host=$HOSTNAME$&servicename=$SERVICEDESC$"\
           },\
       ]\
    }
</action_menu_items>

<action_menu_actions>
</action_menu_actions>

<action_menu_apply>
    hostmenu    = .*;$             # matches all hosts only
    servicemenu = .*;.+$           # matches all services on all hosts
</action_menu_apply>

